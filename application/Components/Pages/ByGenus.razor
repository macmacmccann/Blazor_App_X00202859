@page "/bygenus"
@inject HttpClient Http
@using application.Components
@using application.Components.Layout
@inject application.Services.SpeciesService SpeciesService;
@inject application.Services.WikipediaService WikipediaService;



<h3>All Genus </h3>





<ul class="gridlist">
    @foreach (var s in genus)
    {

        <li class="list">

            <NavLink href=@($"/rankdescription/{s.canonicalName}/{s.key}")>
                @s.genus
            </NavLink>
        </li>
    }

</ul>

@code {


    // $"https://api.gbif.org/v1/species/{key}/children" eg., key 1 lists all phyum under animalia

    List<Species> genus = new();



    protected override async Task OnInitializedAsync()
    {
        var response = await Http.GetFromJsonAsync<SpeciesSearchResponse>("https://api.gbif.org/v1/species?rank=KINGDOM&status=ACCEPTED&limit=100");
        //  kingdom = response?.results ?? new List<Species>();

        genus = response?.results
        .GroupBy(s => s.genus)
        .Select(g => g.First())
        .ToList() ?? new();
    }
}
